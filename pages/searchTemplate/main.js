require("../../common/manifest.js"),require("../../common/vendor.js"),global.webpackJsonpMpvue([12],{"6t3u":function(t,e,s){var i=s("AUzJ"),a=s("ibBl"),o=s("ybqe")(i.a,a.a,(function(t){s("Z3IO"),s("VhhZ")}),"data-v-5c6e151f",null);e.a=o.exports},AUzJ:function(t,e,s){var i=s("Dd8w"),a=s.n(i),o=s("gyMJ"),n=s("NYxO"),r=s("G+9V"),c=s("hHWD");e.a={name:"SearchPoster",components:{toast:r.a,vPopup:c.a},data:function(){return{isIos:0,queryList:{type:"",pageSize:10,pageNum:1,keyWord:""},hasDate:!1,imageList:[],list:[],historyList:[],showAllHistory:!1,tagList:[],hotSearchList:[],hotTemplateList:[],newTemplateList:[],showLoading:!0,resTips:"",total:10}},computed:a()({},Object(n.b)(["baseInfo"])),onLoad:function(t){var e=this;wx.getSystemInfo({success:function(t){(t.system.indexOf("iOS")>-1||t.system.indexOf("IOS")>-1||t.system.indexOf("ios")>-1)&&(e.isIos=1)}}),this.getData()},onShow:function(){this.queryList.keyWord="",this.getHistoryList()},methods:{getData:function(){var t=this;Object(o.m)().then((function(e){t.hotSearchList=e.data.map((function(t){return{keyword:t.keyword,keyWord:t.keyword.length>6?t.keyword.slice(0,6)+"...":t.keyword}}))})),Object(o.n)({type:1}).then((function(e){t.hotTemplateList=e.data}))},resetSearch:function(){this.hasDate=!1,this.queryList.pageSize=10,this.queryList.keyWord="",this.getHistoryList()},watchInput:function(t){this.queryList.pageSize=10,""===t.mp.detail.value&&(this.hasDate=!1)},getHistoryList:function(){this.historyList=[],wx.getStorageSync("historyList")&&(this.historyList=JSON.parse(wx.getStorageSync("historyList"))||[])},clearHistory:function(){this.$refs.vPopup.onShow()},confirmClear:function(){this.historyList=[],wx.setStorageSync("historyList","")},hotSearch:function(t){this.navigateToSubPage("searchList",t)},getMe:function(){this.$store.dispatch("baseInfo/setUserInfo")},chooseTemplate:function(t){1===this.baseInfo.loginStatus?wx.navigateTo({url:"../template/main?id="+t.id}):this.$store.dispatch("baseInfo/login").then((function(e){wx.navigateTo({url:"../template/main?id="+t.id})}))},navigateTo:function(t,e){wx.navigateTo({url:"../"+t+"/main"})},navigateToSubPage:function(t,e){"searchList"!==t?wx.navigateTo({url:"../A-package/pages/"+t+"/main?type="+e}):wx.navigateTo({url:"../A-package/pages/searchList/main?keyWord="+e})},navigateToList:function(t){}},onUnload:function(){this.queryList={type:"",pageSize:10,pageNum:1,keyWord:""},this.imageList=[],this.hasDate=!1},onHide:function(){}}},VhhZ:function(t,e){},Z3IO:function(t,e){},ibBl:function(t,e,s){e.a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-wrapper"},[s("header",{staticClass:"flex-space"},[s("div",{staticClass:"search-input-wrapper flex-box-start"},[s("img",{staticClass:"search-icon",attrs:{src:"../../../static/images/Icons/search.png"}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.queryList.keyWord,expression:"queryList.keyWord"}],staticClass:"search-input",attrs:{placeholder:"试试手气","placeholder-class":"placeholderStyle","confirm-type":"search",eventid:"0"},domProps:{value:t.queryList.keyWord},on:{input:[function(e){e.target.composing||(t.queryList.keyWord=e.target.value)},t.watchInput],confirm:function(e){t.navigateToSubPage("searchList",t.queryList.keyWord)}}}),t._v(" "),s("icon",{directives:[{name:"show",rawName:"v-show",value:t.queryList.keyWord,expression:"queryList.keyWord"}],staticClass:"clear-icon",attrs:{type:"clear",size:"16",eventid:"1"},on:{click:t.resetSearch}})],1),t._v(" "),s("span",{staticClass:"search-btn",attrs:{eventid:"2"},on:{click:function(e){t.navigateToSubPage("searchList",t.queryList.keyWord)}}},[t._v("搜索")])]),t._v(" "),t.hasDate?t._e():s("section",[s("div",{staticClass:"history-wrapper",staticStyle:{padding:"20rpx 0"}},[s("div",{staticClass:"history-title flex-space",staticStyle:{padding:"0 30rpx"}},[s("p",[t._v("历史搜索")]),t._v(" "),s("div",{staticClass:"flex-box",attrs:{eventid:"3"},on:{click:t.clearHistory}},[s("img",{attrs:{src:"../../../static/images/Icons/editor_lose.png",alt:""}}),t._v(" "),s("span",[t._v("清空")])])],1),t._v(" "),t.historyList.length>0?s("div",{staticClass:"historyList-wrapper flex-box-start margin-top-10"},t._l(t.historyList,(function(e,i){return s("block",{key:i},[!t.showAllHistory&&i<10?s("div",{staticClass:"history-item margin-top-10",attrs:{eventid:"4_"+i},on:{click:function(s){t.navigateToSubPage("searchList",e)}}},[t._v(t._s(e))]):t._e(),t._v(" "),t.showAllHistory?s("div",{staticClass:"history-item margin-top-10",attrs:{eventid:"5_"+i},on:{click:function(s){t.navigateToSubPage("searchList",e)}}},[t._v(t._s(e))]):t._e()])}))):0==t.historyList.length?s("div",{staticClass:"noSearchRecord"},[t._v("暂无历史搜索记录")]):t._e(),t._v(" "),t.historyList.length>10?s("div",{staticClass:"showMore-wrapper flex-box",attrs:{eventid:"6"},on:{click:function(e){t.showAllHistory=!t.showAllHistory}}},[s("img",{style:{transform:t.showAllHistory?"":"rotate(180deg)"},attrs:{src:"../../../static/images/Icons/toTop.png"}}),t._v(" "),s("span",[t._v(t._s(t.showAllHistory?"收起":"全部"))])]):t._e()]),t._v(" "),t.tagList.length>0?s("div",{staticClass:"history-wrapper"},[s("div",{staticClass:"history-title flex-space"},[s("p",[t._v("热门标签")]),t._v(" "),s("div",{staticClass:"flex-box"},[s("span",{attrs:{eventid:"7"},on:{click:function(e){t.navigateTo("classify")}}},[t._v("更多 >")])])],1),t._v(" "),s("div",{staticClass:"tag-wrapper flex-wrap flex-space"},t._l(t.tagList,(function(e,i){return s("block",{key:i},[s("div",{staticClass:"tag-item",attrs:{eventid:"8_"+i},on:{click:function(s){t.navigateToList(e)}}},[t._v(t._s(e.name))])])})))]):t._e(),t._v(" "),t.hotSearchList.length>0?s("div",{staticClass:"history-wrapper"},[s("div",{staticClass:"history-title flex-space"},[s("p",[t._v("热搜榜")]),t._v(" "),s("div",{staticClass:"flex-box"},[s("span",{attrs:{eventid:"9"},on:{click:function(e){t.navigateToSubPage("topSearch")}}},[t._v("TOP100 >")])])],1),t._v(" "),s("div",{staticClass:"hotSearch-wrapper flex-wrap flex-box-start"},t._l(t.hotSearchList,(function(e,i){return s("block",{key:i},[s("div",{staticClass:"hotSearch-item flex-box-start",attrs:{eventid:"10_"+i},on:{click:function(s){t.hotSearch(e.keyword)}}},[s("div",{style:{color:i<=2?"#ff9900":"#999",marginRight:"5rpx"}},[t._v(t._s(i+1))]),t._v(" "),s("span",{style:{color:i<=2?"":"#999"}},[t._v(t._s(e.keyWord))])])])})))]):t._e(),t._v(" "),t.hotTemplateList.length>0?s("div",{staticClass:"history-wrapper"},[s("div",{staticClass:"history-title flex-space"},[s("p",[t._v("30天内最热模板")]),t._v(" "),s("div",{staticClass:"flex-box"},[s("span",{attrs:{eventid:"11"},on:{click:function(e){t.navigateToSubPage("hotTemplate",1)}}},[t._v("详细榜单 >")])])],1),t._v(" "),s("div",{staticClass:"template-wrapper flex-wrap flex-space"},t._l(t.hotTemplateList,(function(e,i){return s("block",{key:i},[s("div",{staticClass:"template-item",attrs:{eventid:"12_"+i},on:{click:function(s){t.chooseTemplate(e)}}},[s("img",{attrs:{src:e.thumbnail+"?x-oss-process=image/resize,p_80",mode:"widthFix"}}),t._v(" "),s("div",[t._v("["+t._s(e.tagName||e.realmName)+"] "+t._s(e.trickName))])])])})))]):t._e()]),t._v(" "),s("v-popup",{ref:"vPopup",attrs:{title:"确定要清空历史搜索记录吗?",eventid:"13",mpcomid:"0"},on:{success:t.confirmClear}}),t._v(" "),s("toast",{ref:"toast",attrs:{mpcomid:"1"}})],1)},staticRenderFns:[]}},mYaZ:function(t,e,s){Object.defineProperty(e,"__esModule",{value:!0});var i=s("5nAL"),a=s.n(i),o=s("6t3u");new a.a(o.a).$mount()}},["mYaZ"]);