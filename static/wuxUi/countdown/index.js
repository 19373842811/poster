Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../../@babel/runtime/helpers/typeof"),e=require("../../../@babel/runtime/helpers/classCallCheck"),i=require("../../../@babel/runtime/helpers/createClass"),s=function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:getCurrentPages()[getCurrentPages().length-1];e(this,s),Object.assign(this,{page:i,options:t}),this.__init()}return i(s,[{key:"__init",value:function(){this.setData=this.page.setData.bind(this.page),this.restart(this.options)}},{key:"setDefaults",value:function(){return{date:"June 7, 2087 15:03:25",refresh:1e3,offset:0,onEnd:function(){},render:function(t){}}}},{key:"mergeOptions",value:function(e){var i=this.setDefaults();for(var s in i)i.hasOwnProperty(s)&&(this.options[s]="undefined"!==t(e[s])?e[s]:i[s],"date"===s&&"object"!==t(this.options.date)&&(this.options.date=new Date(this.options.date)),"function"===t(this.options[s])&&(this.options[s]=this.options[s].bind(this)));"object"!==t(this.options.date)&&(this.options.date=new Date(this.options.date))}},{key:"getDiffDate",value:function(){var t=(this.options.date.getTime()-Date.now()+this.options.offset)/1e3,e={years:0,days:0,hours:0,min:0,sec:0,millisec:0};return t<=0?(this.interval&&(this.stop(),this.options.onEnd()),e):(t>=31557600&&(e.years=Math.floor(t/31557600),t-=365.25*e.years*86400),t>=86400&&(e.days=Math.floor(t/86400),t-=86400*e.days),t>=3600&&(e.hours=Math.floor(t/3600),t-=3600*e.hours),t>=60&&(e.min=Math.floor(t/60),t-=60*e.min),e.sec=Math.round(t),e.millisec=t%1*1e3,e)}},{key:"leadingZeros",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(t=String(t)).length>e?t:(Array(e+1).join("0")+t).substr(-e)}},{key:"update",value:function(e){return this.options.date="object"!==t(e)?new Date(e):e,this.render(),this}},{key:"stop",value:function(){return this.interval&&(clearInterval(this.interval),this.interval=!1),this}},{key:"render",value:function(){return this.options.render(this.getDiffDate()),this}},{key:"start",value:function(){var t=this;return!this.interval&&(this.render(),this.options.refresh&&(this.interval=setInterval((function(){t.render()}),this.options.refresh)),this)}},{key:"updateOffset",value:function(t){return this.options.offset=t,this}},{key:"restart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.mergeOptions(t),this.interval=!1,this.start(),this}}]),s}();exports.default=s;